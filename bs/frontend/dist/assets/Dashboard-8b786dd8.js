import{_ as q,a as p,E as h,r as J,b as o,o as f,c as v,e as t,w as s,d as e,f as w,t as d,F as O,s as j}from"./index-48d38f36.js";const z={name:"AdminDashboard",components:{},data(){return{user:{},activeMenu:"/admin/dashboard",stats:{student_count:0,teacher_count:0,course_count:0,attendance_count:0},attendanceDistribution:{present:0,late:0,absent:0,present_rate:0,late_rate:0,absent_rate:0},categoryStats:[]}},created(){this.user=JSON.parse(localStorage.getItem("user")),this.loadDashboardData()},methods:{async loadDashboardData(){try{const i=await p.get("/admin/system/stats");i.success&&(this.stats=i.data);const n=await p.get("/admin/attendance/distribution");n.success&&(this.attendanceDistribution=n.data);const u=await p.get("/admin/courses/categories/stats");u.success&&(this.categoryStats=u.data.slice(0,5))}catch(i){console.error("Load dashboard data error:",i),h.error("加载数据失败")}},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),J.push("/login"),h.success("退出登录成功")}}},G={class:"dashboard-container"},K={class:"header-content"},P={class:"user-info"},Q={class:"main-content"},W={class:"card-item"},X={class:"card-content"},Y={class:"card-number"},Z={class:"card-item"},$={class:"card-content"},tt={class:"card-number"},et={class:"card-item"},st={class:"card-content"},nt={class:"card-number"},ot={class:"card-item"},at={class:"card-content"},dt={class:"card-number"},lt={class:"chart-container"},rt={class:"chart-legend"},ct={class:"legend-item"},it={class:"legend-item"},_t={class:"legend-item"},ut={class:"category-stats"},mt={class:"category-name"},pt={class:"category-count"};function ft(i,n,u,vt,a,D){const y=o("ArrowDown"),l=o("el-icon"),x=o("el-dropdown-item"),S=o("el-dropdown-menu"),k=o("el-dropdown"),A=o("el-header"),C=o("Home"),_=o("el-menu-item"),I=o("User"),N=o("Avatar"),B=o("Document"),E=o("Timer"),M=o("el-menu"),R=o("el-aside"),T=o("user"),r=o("el-card"),c=o("el-col"),V=o("avatar"),F=o("document"),H=o("timer"),g=o("el-row"),L=o("el-progress"),U=o("el-main"),b=o("el-container");return f(),v("div",G,[t(b,null,{default:s(()=>[t(A,null,{default:s(()=>[e("div",K,[n[1]||(n[1]=e("h1",null,"互联网课堂考勤系统 - 管理员端",-1)),t(k,null,{dropdown:s(()=>[t(S,null,{default:s(()=>[t(x,{divided:"",onClick:D.logout},{default:s(()=>[...n[0]||(n[0]=[w("退出登录",-1)])]),_:1},8,["onClick"])]),_:1})]),default:s(()=>[e("span",P,[w(d(a.user.name)+" ",1),t(l,null,{default:s(()=>[t(y)]),_:1})])]),_:1})])]),_:1}),t(b,null,{default:s(()=>[t(R,{width:"200px"},{default:s(()=>[t(M,{"default-active":a.activeMenu,class:"sidebar-menu",router:"","unique-opened":!0},{default:s(()=>[t(_,{index:"/admin/dashboard"},{default:s(()=>[t(l,null,{default:s(()=>[t(C)]),_:1}),n[2]||(n[2]=e("span",null,"仪表板",-1))]),_:1}),t(_,{index:"/admin/students"},{default:s(()=>[t(l,null,{default:s(()=>[t(I)]),_:1}),n[3]||(n[3]=e("span",null,"学生管理",-1))]),_:1}),t(_,{index:"/admin/teachers"},{default:s(()=>[t(l,null,{default:s(()=>[t(N)]),_:1}),n[4]||(n[4]=e("span",null,"教师管理",-1))]),_:1}),t(_,{index:"/admin/courses"},{default:s(()=>[t(l,null,{default:s(()=>[t(B)]),_:1}),n[5]||(n[5]=e("span",null,"课程管理",-1))]),_:1}),t(_,{index:"/admin/attendance"},{default:s(()=>[t(l,null,{default:s(()=>[t(E)]),_:1}),n[6]||(n[6]=e("span",null,"考勤统计",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),t(U,null,{default:s(()=>[e("div",Q,[n[16]||(n[16]=e("h2",null,"系统概览",-1)),t(g,{gutter:20},{default:s(()=>[t(c,{span:6},{default:s(()=>[t(r,{shadow:"hover"},{default:s(()=>[e("div",W,[t(l,{class:"card-icon"},{default:s(()=>[t(T)]),_:1}),e("div",X,[e("div",Y,d(a.stats.student_count),1),n[7]||(n[7]=e("div",{class:"card-label"},"学生总数",-1))])])]),_:1})]),_:1}),t(c,{span:6},{default:s(()=>[t(r,{shadow:"hover"},{default:s(()=>[e("div",Z,[t(l,{class:"card-icon"},{default:s(()=>[t(V)]),_:1}),e("div",$,[e("div",tt,d(a.stats.teacher_count),1),n[8]||(n[8]=e("div",{class:"card-label"},"教师总数",-1))])])]),_:1})]),_:1}),t(c,{span:6},{default:s(()=>[t(r,{shadow:"hover"},{default:s(()=>[e("div",et,[t(l,{class:"card-icon"},{default:s(()=>[t(F)]),_:1}),e("div",st,[e("div",nt,d(a.stats.course_count),1),n[9]||(n[9]=e("div",{class:"card-label"},"课程总数",-1))])])]),_:1})]),_:1}),t(c,{span:6},{default:s(()=>[t(r,{shadow:"hover"},{default:s(()=>[e("div",ot,[t(l,{class:"card-icon"},{default:s(()=>[t(H)]),_:1}),e("div",at,[e("div",dt,d(a.stats.attendance_count),1),n[10]||(n[10]=e("div",{class:"card-label"},"考勤记录",-1))])])]),_:1})]),_:1})]),_:1}),t(g,{gutter:20,class:"mt-20"},{default:s(()=>[t(c,{span:12},{default:s(()=>[t(r,null,{header:s(()=>[...n[11]||(n[11]=[e("div",{class:"card-header"},[e("span",null,"考勤状态分布")],-1)])]),default:s(()=>[e("div",lt,[t(L,{percentage:a.attendanceDistribution.present_rate,type:"line","stroke-width":24,status:"success"},null,8,["percentage"]),e("div",rt,[e("div",ct,[n[12]||(n[12]=e("span",{class:"legend-color success"},null,-1)),e("span",null,"出勤: "+d(a.attendanceDistribution.present)+" ("+d(a.attendanceDistribution.present_rate)+"%)",1)]),e("div",it,[n[13]||(n[13]=e("span",{class:"legend-color warning"},null,-1)),e("span",null,"迟到: "+d(a.attendanceDistribution.late)+" ("+d(a.attendanceDistribution.late_rate)+"%)",1)]),e("div",_t,[n[14]||(n[14]=e("span",{class:"legend-color danger"},null,-1)),e("span",null,"缺勤: "+d(a.attendanceDistribution.absent)+" ("+d(a.attendanceDistribution.absent_rate)+"%)",1)])])])]),_:1})]),_:1}),t(c,{span:12},{default:s(()=>[t(r,null,{header:s(()=>[...n[15]||(n[15]=[e("div",{class:"card-header"},[e("span",null,"课程分类统计")],-1)])]),default:s(()=>[e("div",ut,[(f(!0),v(O,null,j(a.categoryStats,m=>(f(),v("div",{key:m.id,class:"category-item"},[e("div",mt,d(m.name),1),e("div",pt,d(m.count)+" 门",1)]))),128))])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}const bt=q(z,[["render",ft],["__scopeId","data-v-b8a7ed68"]]);export{bt as default};
