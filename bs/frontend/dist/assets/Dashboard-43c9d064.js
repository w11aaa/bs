import{_ as z,a as C,E as g,r as y,b as n,o as J,c as L,e as t,w as e,d as o,f as m,t as d}from"./index-48d38f36.js";const O={name:"TeacherDashboard",components:{},data(){return{user:{},activeMenu:"/teacher/dashboard",courseCount:0,studentCount:0,attendanceRecordCount:0,todayStats:{total:0,present:0,late:0,absent:0},recentCourses:[]}},created(){this.user=JSON.parse(localStorage.getItem("user")),this.loadDashboardData()},methods:{async loadDashboardData(){try{const l=await C.get("/teacher/courses");l.success&&(this.courseCount=l.data.length,this.recentCourses=l.data.slice(0,5),this.studentCount=l.data.reduce((f,v)=>f+(v.student_count||0),0));const s=await C.get("/teacher/attendance/stats");s.success&&(this.attendanceRecordCount=s.data.total_records,this.todayStats=s.data.today_stats)}catch(l){console.error("Load dashboard data error:",l),g.error("加载数据失败")}},viewCourse(l){this.$router.push(`/teacher/courses/${l}`)},toProfile(){y.push("/teacher/profile")},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),y.push("/login"),g.success("退出登录成功")}}},j={class:"dashboard-container"},F={class:"header-content"},G={class:"user-info"},K={class:"main-content"},Q={class:"card-item"},W={class:"card-content"},X={class:"card-number"},Y={class:"card-item"},Z={class:"card-content"},$={class:"card-number"},tt={class:"card-item"},et={class:"card-content"},st={class:"card-number"},ot={class:"stats-container"},nt={class:"stat-item"},at={class:"stat-number"},lt={class:"stat-item success"},dt={class:"stat-number"},rt={class:"stat-item warning"},ct={class:"stat-number"},ut={class:"stat-item danger"},_t={class:"stat-number"};function it(l,s,f,v,a,p){const x=n("ArrowDown"),r=n("el-icon"),h=n("el-dropdown-item"),D=n("el-dropdown-menu"),S=n("el-dropdown"),k=n("el-header"),R=n("Home"),i=n("el-menu-item"),I=n("Document"),N=n("Timer"),T=n("User"),B=n("el-menu"),E=n("el-aside"),M=n("document"),u=n("el-card"),c=n("el-col"),V=n("users"),A=n("timer"),b=n("el-row"),_=n("el-table-column"),H=n("el-button"),P=n("el-table"),U=n("el-main"),w=n("el-container");return J(),L("div",j,[t(w,null,{default:e(()=>[t(k,null,{default:e(()=>[o("div",F,[s[2]||(s[2]=o("h1",null,"互联网课堂考勤系统 - 教师端",-1)),t(S,null,{dropdown:e(()=>[t(D,null,{default:e(()=>[t(h,{onClick:p.toProfile},{default:e(()=>[...s[0]||(s[0]=[m("个人资料",-1)])]),_:1},8,["onClick"]),t(h,{divided:"",onClick:p.logout},{default:e(()=>[...s[1]||(s[1]=[m("退出登录",-1)])]),_:1},8,["onClick"])]),_:1})]),default:e(()=>[o("span",G,[m(d(a.user.name)+" ",1),t(r,null,{default:e(()=>[t(x)]),_:1})])]),_:1})])]),_:1}),t(w,null,{default:e(()=>[t(E,{width:"200px"},{default:e(()=>[t(B,{"default-active":a.activeMenu,class:"sidebar-menu",router:"","unique-opened":!0},{default:e(()=>[t(i,{index:"/teacher/dashboard"},{default:e(()=>[t(r,null,{default:e(()=>[t(R)]),_:1}),s[3]||(s[3]=o("span",null,"仪表板",-1))]),_:1}),t(i,{index:"/teacher/courses"},{default:e(()=>[t(r,null,{default:e(()=>[t(I)]),_:1}),s[4]||(s[4]=o("span",null,"我的课程",-1))]),_:1}),t(i,{index:"/teacher/attendance"},{default:e(()=>[t(r,null,{default:e(()=>[t(N)]),_:1}),s[5]||(s[5]=o("span",null,"考勤管理",-1))]),_:1}),t(i,{index:"/teacher/profile"},{default:e(()=>[t(r,null,{default:e(()=>[t(T)]),_:1}),s[6]||(s[6]=o("span",null,"个人资料",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),t(U,null,{default:e(()=>[o("div",K,[o("h2",null,"欢迎，"+d(a.user.name),1),t(b,{gutter:20},{default:e(()=>[t(c,{span:8},{default:e(()=>[t(u,{shadow:"hover"},{default:e(()=>[o("div",Q,[t(r,{class:"card-icon"},{default:e(()=>[t(M)]),_:1}),o("div",W,[o("div",X,d(a.courseCount),1),s[7]||(s[7]=o("div",{class:"card-label"},"教授课程",-1))])])]),_:1})]),_:1}),t(c,{span:8},{default:e(()=>[t(u,{shadow:"hover"},{default:e(()=>[o("div",Y,[t(r,{class:"card-icon primary"},{default:e(()=>[t(V)]),_:1}),o("div",Z,[o("div",$,d(a.studentCount),1),s[8]||(s[8]=o("div",{class:"card-label"},"学生总数",-1))])])]),_:1})]),_:1}),t(c,{span:8},{default:e(()=>[t(u,{shadow:"hover"},{default:e(()=>[o("div",tt,[t(r,{class:"card-icon info"},{default:e(()=>[t(A)]),_:1}),o("div",et,[o("div",st,d(a.attendanceRecordCount),1),s[9]||(s[9]=o("div",{class:"card-label"},"考勤记录",-1))])])]),_:1})]),_:1})]),_:1}),t(u,{class:"mt-20"},{header:e(()=>[...s[10]||(s[10]=[o("div",{class:"card-header"},[o("span",null,"今日考勤统计")],-1)])]),default:e(()=>[o("div",ot,[t(b,{gutter:20},{default:e(()=>[t(c,{span:6},{default:e(()=>[o("div",nt,[o("div",at,d(a.todayStats.total),1),s[11]||(s[11]=o("div",{class:"stat-label"},"应出勤",-1))])]),_:1}),t(c,{span:6},{default:e(()=>[o("div",lt,[o("div",dt,d(a.todayStats.present),1),s[12]||(s[12]=o("div",{class:"stat-label"},"已出勤",-1))])]),_:1}),t(c,{span:6},{default:e(()=>[o("div",rt,[o("div",ct,d(a.todayStats.late),1),s[13]||(s[13]=o("div",{class:"stat-label"},"迟到",-1))])]),_:1}),t(c,{span:6},{default:e(()=>[o("div",ut,[o("div",_t,d(a.todayStats.absent),1),s[14]||(s[14]=o("div",{class:"stat-label"},"缺勤",-1))])]),_:1})]),_:1})])]),_:1}),t(u,{class:"mt-20"},{header:e(()=>[...s[15]||(s[15]=[o("div",{class:"card-header"},[o("span",null,"近期课程")],-1)])]),default:e(()=>[t(P,{data:a.recentCourses,style:{width:"100%"}},{default:e(()=>[t(_,{prop:"course_name",label:"课程名称"}),t(_,{prop:"course_code",label:"课程代码"}),t(_,{prop:"student_count",label:"学生人数"}),t(_,{prop:"total_hours",label:"总课时"}),t(_,{prop:"action",label:"操作"},{default:e(({row:q})=>[t(H,{type:"primary",size:"small",onClick:mt=>p.viewCourse(q.id)},{default:e(()=>[...s[16]||(s[16]=[m(" 查看 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1})]),_:1})]),_:1})])}const ft=z(O,[["render",it],["__scopeId","data-v-d6c66af3"]]);export{ft as default};
