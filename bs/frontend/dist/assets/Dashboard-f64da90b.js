import{_ as J,a as v,E as x,r as D,b as o,o as L,c as O,e,w as t,d as s,f as i,t as d}from"./index-48d38f36.js";const j={name:"StudentDashboard",components:{},data(){return{user:{},activeMenu:"/student/dashboard",courseCount:0,attendanceStats:{present:0,absent:0},recentAttendance:[]}},created(){this.user=JSON.parse(localStorage.getItem("user")),this.loadDashboardData()},methods:{async loadDashboardData(){var c;try{const n=await v.get("/student/courses");this.courseCount=((c=n.data)==null?void 0:c.length)||0;const m=await v.get("/student/attendance/stats");m.data&&(this.attendanceStats=m.data);const p=await v.get("/student/attendance/recent?limit=5");p.data&&(this.recentAttendance=p.data)}catch(n){console.error("Load dashboard data error:",n),x.error("加载数据失败")}},getStatusType(c){switch(c){case"出勤":return"success";case"缺勤":return"danger";case"迟到":return"warning";default:return"info"}},toProfile(){D.push("/student/profile")},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),D.push("/login"),x.success("退出登录成功")}}},z={class:"dashboard-container"},F={class:"header-content"},G={class:"user-info"},K={class:"main-content"},Q={class:"card-item"},W={class:"card-content"},X={class:"card-number"},Y={class:"card-item"},Z={class:"card-content"},$={class:"card-number"},ee={class:"card-item"},te={class:"card-content"},ne={class:"card-number"};function oe(c,n,m,p,l,f){const S=o("ArrowDown"),a=o("el-icon"),b=o("el-dropdown-item"),y=o("el-dropdown-menu"),k=o("el-dropdown"),C=o("el-header"),A=o("Home"),r=o("el-menu-item"),T=o("Document"),I=o("Timer"),N=o("User"),B=o("el-menu"),E=o("el-aside"),M=o("document"),u=o("el-card"),h=o("el-col"),R=o("check"),V=o("warning"),H=o("el-row"),_=o("el-table-column"),P=o("el-tag"),U=o("el-table"),q=o("el-main"),w=o("el-container");return L(),O("div",z,[e(w,null,{default:t(()=>[e(C,null,{default:t(()=>[s("div",F,[n[2]||(n[2]=s("h1",null,"互联网课堂考勤系统 - 学生端",-1)),e(k,null,{dropdown:t(()=>[e(y,null,{default:t(()=>[e(b,{onClick:f.toProfile},{default:t(()=>[...n[0]||(n[0]=[i("个人资料",-1)])]),_:1},8,["onClick"]),e(b,{divided:"",onClick:f.logout},{default:t(()=>[...n[1]||(n[1]=[i("退出登录",-1)])]),_:1},8,["onClick"])]),_:1})]),default:t(()=>[s("span",G,[i(d(l.user.name)+" ",1),e(a,null,{default:t(()=>[e(S)]),_:1})])]),_:1})])]),_:1}),e(w,null,{default:t(()=>[e(E,{width:"200px"},{default:t(()=>[e(B,{"default-active":l.activeMenu,class:"sidebar-menu",router:"","unique-opened":!0},{default:t(()=>[e(r,{index:"/student/dashboard"},{default:t(()=>[e(a,null,{default:t(()=>[e(A)]),_:1}),n[3]||(n[3]=s("span",null,"仪表板",-1))]),_:1}),e(r,{index:"/student/courses"},{default:t(()=>[e(a,null,{default:t(()=>[e(T)]),_:1}),n[4]||(n[4]=s("span",null,"我的课程",-1))]),_:1}),e(r,{index:"/student/attendance"},{default:t(()=>[e(a,null,{default:t(()=>[e(I)]),_:1}),n[5]||(n[5]=s("span",null,"考勤记录",-1))]),_:1}),e(r,{index:"/student/profile"},{default:t(()=>[e(a,null,{default:t(()=>[e(N)]),_:1}),n[6]||(n[6]=s("span",null,"个人资料",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),e(q,null,{default:t(()=>[s("div",K,[s("h2",null,"欢迎，"+d(l.user.name),1),e(H,{gutter:20},{default:t(()=>[e(h,{span:8},{default:t(()=>[e(u,{shadow:"hover"},{default:t(()=>[s("div",Q,[e(a,{class:"card-icon"},{default:t(()=>[e(M)]),_:1}),s("div",W,[s("div",X,d(l.courseCount),1),n[7]||(n[7]=s("div",{class:"card-label"},"已选课程",-1))])])]),_:1})]),_:1}),e(h,{span:8},{default:t(()=>[e(u,{shadow:"hover"},{default:t(()=>[s("div",Y,[e(a,{class:"card-icon success"},{default:t(()=>[e(R)]),_:1}),s("div",Z,[s("div",$,d(l.attendanceStats.present),1),n[8]||(n[8]=s("div",{class:"card-label"},"出勤次数",-1))])])]),_:1})]),_:1}),e(h,{span:8},{default:t(()=>[e(u,{shadow:"hover"},{default:t(()=>[s("div",ee,[e(a,{class:"card-icon warning"},{default:t(()=>[e(V)]),_:1}),s("div",te,[s("div",ne,d(l.attendanceStats.absent),1),n[9]||(n[9]=s("div",{class:"card-label"},"缺勤次数",-1))])])]),_:1})]),_:1})]),_:1}),e(u,{class:"mt-20"},{header:t(()=>[...n[10]||(n[10]=[s("div",{class:"card-header"},[s("span",null,"最近考勤记录")],-1)])]),default:t(()=>[e(U,{data:l.recentAttendance,style:{width:"100%"}},{default:t(()=>[e(_,{prop:"course_name",label:"课程名称"}),e(_,{prop:"date",label:"日期"}),e(_,{prop:"time",label:"签到时间"}),e(_,{prop:"status",label:"状态"},{default:t(({row:g})=>[e(P,{type:f.getStatusType(g.status)},{default:t(()=>[i(d(g.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1})]),_:1})]),_:1})])}const ae=J(j,[["render",oe],["__scopeId","data-v-01facef7"]]);export{ae as default};
